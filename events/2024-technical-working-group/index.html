<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Samuel Klein">
<meta name="author" content="Matt Marx">
<meta name="dcterms.date" content="2024-12-06">
<meta name="description" content="Two-day event featuring presentations on emerging tools and datasets for innovation research, including discussions of entrepreneurship databases, new product analysis, novelty measurement tools, large language model applications, patent databases, and comparative NLP methodologies.">

<title>2024 Technical Working Group meeting – Innovation Information Initiative</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-4f45926fbf7b8b67d23d75c6c0af1acc.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="2024 Technical Working Group meeting – Innovation Information Initiative">
<meta property="og:description" content="Two-day event featuring presentations on emerging tools and datasets for innovation research, including discussions of entrepreneurship databases, new product analysis, novelty measurement tools, large language model applications, patent databases, and comparative NLP methodologies.">
<meta property="og:image" content="https://www.i3open.org/events/2024-technical-working-group/images/2024-twg.png">
<meta property="og:site_name" content="Innovation Information Initiative">
<meta property="og:image:height" content="1024">
<meta property="og:image:width" content="1024">
<meta name="twitter:title" content="2024 Technical Working Group meeting – Innovation Information Initiative">
<meta name="twitter:description" content="Two-day event featuring presentations on emerging tools and datasets for innovation research, including discussions of entrepreneurship databases, new product analysis, novelty measurement tools, large language model applications, patent databases, and comparative NLP methodologies.">
<meta name="twitter:image" content="https://www.i3open.org/events/2024-technical-working-group/images/2024-twg.png">
<meta name="twitter:image-height" content="1024">
<meta name="twitter:image-width" content="1024">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Innovation Information Initiative</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../events.html"> 
<span class="menu-text">Events</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../fellows.html"> 
<span class="menu-text">Fellows</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../datasets.html"> 
<span class="menu-text">Datasets</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../bigquery.html"> 
<span class="menu-text">BigQuery</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#friday-december-6" id="toc-friday-december-6" class="nav-link active" data-scroll-target="#friday-december-6">Friday, December 6</a>
  <ul class="collapse">
  <li><a href="#new-ventures-products-and-tools" id="toc-new-ventures-products-and-tools" class="nav-link" data-scroll-target="#new-ventures-products-and-tools">4:15 New Ventures, Products, and Tools</a>
  <ul class="collapse">
  <li><a href="#database-methodological-tools-and-research-opportunities-creative-destruction-lab-and-early-stage-technology-ventures" id="toc-database-methodological-tools-and-research-opportunities-creative-destruction-lab-and-early-stage-technology-ventures" class="nav-link" data-scroll-target="#database-methodological-tools-and-research-opportunities-creative-destruction-lab-and-early-stage-technology-ventures">Database, Methodological Tools, and Research Opportunities: Creative Destruction Lab and Early-Stage Technology Ventures</a></li>
  <li><a href="#new-products" id="toc-new-products" class="nav-link" data-scroll-target="#new-products">New Products</a></li>
  <li><a href="#novelpy-a-python-package-to-measure-novelty-and-disruptiveness" id="toc-novelpy-a-python-package-to-measure-novelty-and-disruptiveness" class="nav-link" data-scroll-target="#novelpy-a-python-package-to-measure-novelty-and-disruptiveness">Novelpy: A Python Package to Measure Novelty and Disruptiveness</a></li>
  </ul></li>
  <li><a href="#i3-updates-and-announcements" id="toc-i3-updates-and-announcements" class="nav-link" data-scroll-target="#i3-updates-and-announcements">5:45 I3 updates and announcements</a>
  <ul class="collapse">
  <li><a href="#introducing-the-i3-bigquery-data-repository" id="toc-introducing-the-i3-bigquery-data-repository" class="nav-link" data-scroll-target="#introducing-the-i3-bigquery-data-repository">Introducing the I3 BigQuery Data Repository</a></li>
  <li><a href="#introducing-the-2025-i3-fellows" id="toc-introducing-the-2025-i3-fellows" class="nav-link" data-scroll-target="#introducing-the-2025-i3-fellows">Introducing the 2025 I3 Fellows!</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#saturday-december-7" id="toc-saturday-december-7" class="nav-link" data-scroll-target="#saturday-december-7">Saturday, December 7</a>
  <ul class="collapse">
  <li><a href="#building-datasets-with-llms" id="toc-building-datasets-with-llms" class="nav-link" data-scroll-target="#building-datasets-with-llms">9:00 Building Datasets with LLMs</a>
  <ul class="collapse">
  <li><a href="#llm-based-topic-modeling" id="toc-llm-based-topic-modeling" class="nav-link" data-scroll-target="#llm-based-topic-modeling">LLM-based Topic Modeling</a></li>
  <li><a href="#a-robust-green-patent-database" id="toc-a-robust-green-patent-database" class="nav-link" data-scroll-target="#a-robust-green-patent-database">A Robust Green Patent Database</a></li>
  <li><a href="#distilling-data-from-large-language-models" id="toc-distilling-data-from-large-language-models" class="nav-link" data-scroll-target="#distilling-data-from-large-language-models">Distilling Data from Large Language Models</a></li>
  </ul></li>
  <li><a href="#comparative-nlp-methods" id="toc-comparative-nlp-methods" class="nav-link" data-scroll-target="#comparative-nlp-methods">10:45 Comparative NLP Methods</a>
  <ul class="collapse">
  <li><a href="#tracing-the-flow-of-knowledge-from-science-to-technology" id="toc-tracing-the-flow-of-knowledge-from-science-to-technology" class="nav-link" data-scroll-target="#tracing-the-flow-of-knowledge-from-science-to-technology">Tracing the Flow of Knowledge From Science to Technology</a></li>
  <li><a href="#patent-text-and-long-run-innovation-dynamics" id="toc-patent-text-and-long-run-innovation-dynamics" class="nav-link" data-scroll-target="#patent-text-and-long-run-innovation-dynamics">Patent Text and Long-Run Innovation Dynamics</a></li>
  </ul></li>
  <li><a href="#global-patent-data" id="toc-global-patent-data" class="nav-link" data-scroll-target="#global-patent-data">11:45 Global Patent Data</a>
  <ul class="collapse">
  <li><a href="#a-new-database-of-indian-patents" id="toc-a-new-database-of-indian-patents" class="nav-link" data-scroll-target="#a-new-database-of-indian-patents">A New Database of Indian Patents</a></li>
  <li><a href="#creating-the-china-patent-dataset" id="toc-creating-the-china-patent-dataset" class="nav-link" data-scroll-target="#creating-the-china-patent-dataset">Creating the China Patent Dataset</a></li>
  <li><a href="#a-novel-dataset-for-historical-innovation-studies-linking-uspto-patents-and-us-census-data-from-1850-to-1940" id="toc-a-novel-dataset-for-historical-innovation-studies-linking-uspto-patents-and-us-census-data-from-1850-to-1940" class="nav-link" data-scroll-target="#a-novel-dataset-for-historical-innovation-studies-linking-uspto-patents-and-us-census-data-from-1850-to-1940">A Novel Dataset for Historical Innovation Studies: Linking USPTO Patents and US Census Data from 1850 to 1940</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">2024 Technical Working Group meeting</h1>
<p class="subtitle lead">December 2024 meeting of the I3 TWG</p>
  <div class="quarto-categories">
    <div class="quarto-category">workshop</div>
    <div class="quarto-category">technical-working-group</div>
    <div class="quarto-category">featured</div>
  </div>
  </div>

<div>
  <div class="description">
    Two-day event featuring presentations on emerging tools and datasets for innovation research, including discussions of entrepreneurship databases, new product analysis, novelty measurement tools, large language model applications, patent databases, and comparative NLP methodologies.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p>Samuel Klein </p>
             <p>Matt Marx </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 6, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><strong>December 6-7</strong>, 2024</p>
<hr>
<section id="friday-december-6" class="level1">
<h1>Friday, December 6</h1>
<hr>
<p><strong>4:00 pm</strong>: Welcome: <strong><a href="https://www.youtube.com/watch?v=3pgf9BAbeYs">YouTube</a></strong> broadcast, <strong><a href="https://nber-org.zoom.us/j/86722433291?pwd=0CyESmwAiDy3QLezXfIV2kgaDLDa3s.1">Zoom</a></strong>, <a href="https://www.nber.org/conferences/conference-code-conduct">code of conduct</a><br>
4:15 <a href="#new-ventures-products-and-tools">New Ventures, Products, and Tools</a><br>
5:45 <a href="#i3-updates-and-announcements">I3 updates and announcements</a></p>
<hr>
<section id="new-ventures-products-and-tools" class="level2">
<h2 class="anchored" data-anchor-id="new-ventures-products-and-tools">4:15 New Ventures, Products, and Tools</h2>
<section id="database-methodological-tools-and-research-opportunities-creative-destruction-lab-and-early-stage-technology-ventures" class="level3">
<h3 class="anchored" data-anchor-id="database-methodological-tools-and-research-opportunities-creative-destruction-lab-and-early-stage-technology-ventures"><a href="https://conference.nber.org/conf_papers/f211396/f211396.pdf">Database, Methodological Tools, and Research Opportunities</a>: <a href="https://conference.nber.org/conf_papers/f211396/f211396.pdf">Creative Destruction Lab and Early-Stage Technology Ventures</a></h3>
<p><img src="images/01-amir-sariri.jpeg" class="float-end img-fluid" style="max-width: 200px; margin-left: 15px; margin-bottom: 10px;"></p>
<p><strong>Amir Sariri</strong> (Purdue University), Avi Goldfarb (University of Toronto, NBER)</p>
<p><a href="cdldata.amirsariri.com">Creative Destruction lab</a>: our relational db has 200 linked datasets. Such as a table for meeting notes, w/ granularly linked statements from participants, giving us comment-level data</p>
<p><a href="https://drive.google.com/file/d/18e_ShE23WGycL89kJA6IyPCrd92bZ-qC/view?pli=1">CDL data dictionary</a></p>
<p>Examples:</p>
<p><img src="images/02-cdl-data-screenshot.png" class="img-fluid"></p>
<p>This work in information friction was an RCT.</p>
<p><strong>Discussion</strong>:</p>
<p>Q: How are mentors recruited for your mentorship system?<br>
A: Initially, this was via networks of the program founders.</p>
<p>Q: I love seeing this data; our first entrepreneurship dataset ever! (well, there’s a 2013 dataset from crunchbase, but that’s it) Tell me more about [the long tail?]<br>
A: We have application data (for things other than the final vetted applications), it is not as good. We don’t follow up with them b/c they’re not in the program. Be cautious in interpreting that data.</p>
<hr>
</section>
<section id="new-products" class="level3">
<h3 class="anchored" data-anchor-id="new-products"><a href="https://conference.nber.org/conf_papers/f211342/f211342.pdf">New Products</a></h3>
<p><img src="images/03-bruno-pellegrino.jpg" class="float-end img-fluid" style="max-width: 200px; margin-left: 15px; margin-bottom: 10px;"></p>
<p>Abhiroop Mukherjee (HKUST), <strong>Bruno Pellegrino</strong> (Columbia University), Alminas Zaldokas (NUS), Yiman Ren (University of Michigan), Tomas Thornquist (Shell Street Labs)</p>
<p>When a successful new product comes out, we want to look at the change in consumer surplus and the effect on other firms, to see the overall welfare impact. But GDP growth misses this, mainly capturing the increase in existing varieties.</p>
<p>Our approach is threefold: - build a database of new product introductions, - estimate the profits from these introductions captured by firms, and - estimate spillovers and consumer surplus</p>
<p><strong>Discussion</strong>:</p>
<p>Q: Do you study robustness of results around the window you choose around the product announcement? (the market takes time)<br>
A: Yes, thankfully we have the announcement date which is unambiguous. We see clear discontinuities. With a longer window, the effect gets bigger. (market also anticipates)</p>
<p>Q: Why not run event studies with competitors?<br>
A: If you run events firm by firm, you’ll get N^2 studies per year, 25M from 5k competitors. This way we can compute spillovers in closed form w/o looking at those imprecise crossover events.</p>
<p>Q: What about unpriced spillovers? I would have guessed we’re also interested in knowledge spillovers, which may happen in other years vs contemporaneous. Are you looking only at price information?<br>
A: Knowledge spillovers may be there, we’re not looking at those. This may be more relevant for patents than new products. Our model by construction can’t capture that.</p>
<p>Q: About interpretation: what’s the difference between the change in firm profits vs the change across their market happening to all firms in the market?<br>
A: Yes, we are all playing an oligopoly game, everyone adjusts their output and prices. Equilibrium pricing effects should already be taken into account.</p>
<p>Q: If you’re only looking at ‘winners’, are the results here inflated?<br>
A: We’re careful about who we call winners. If a product was not expected to be successful by the market, the normal return would be close to zero. We don’t use the average across all firms; each product-introduction has its own abnormal return.</p>
<p>Q: In the patent paper, the average return is essentially zero. They do a trip to convert negative returns into positive numbers, so the return to a patent is bounded at zero. You have larger average returns but presumably got negatives — what do you do with them? Are they still negative, or do you transform them so the value is bounded at 0?<br>
A: In the paper, there’s a signal connected to the patent, which could be positive or negative. They make a distributional assumption, and have a bayesian technique to recover expected signal from the return. We do the same thing, but have a better signal-to-noise ratio, b/c we have a sharp announcement date.</p>
<hr>
</section>
<section id="novelpy-a-python-package-to-measure-novelty-and-disruptiveness" class="level3">
<h3 class="anchored" data-anchor-id="novelpy-a-python-package-to-measure-novelty-and-disruptiveness"><a href="https://arxiv.org/pdf/2211.10346">Novelpy: A Python Package to Measure Novelty and Disruptiveness</a></h3>
<p><img src="images/04-pierre-pelletier.jpg" class="float-end img-fluid" style="max-width: 200px; margin-left: 15px; margin-bottom: 10px;"></p>
<p><strong>Pierre Pelletier</strong>, Kevin Wirtz (University of Strasbourg)</p>
<p>We want to quantify novelty and disruptiveness in science. This underpins peer recogntion and has played a crucial role in science and tech policy. We propose <strong><code>Novelpy</code></strong>, an open source tool that estimates both of these, and displays it graphically, to advance the science of science.</p>
<p><img src="images/05-novelpy-github.png" class="img-fluid"></p>
<p>For disruptiveness, we look at the citation network, and 6 different indicators of disruptiveness. Each one has its critics, so we offer the set of all indicators and let the users decide what to do with the results.</p>
<p>In related work, we have previously estimated cognitive diversity and its impact on novelty and impact, looking at PubMed publiations. (<a href="https://arxiv.org/abs/2312.10476">Sails and Anchors, 2023</a>)</p>
<p><strong>Discussion</strong>:</p>
<p>Q: You’ve run this on PubMed, using abstracts and mesh terms. I work with OpenAlex; it sounds like I could do a preprocessing step to take whatever dataset I want to use, and run your code on it. Is that the way to think about it?<br>
A: Yes, exactly.</p>
<p>Q: Say you run across edge cases in your citation network, like 50 references to the same source, or excess self-cites, or a quirk in the source that messed up the citations. Do you have any features that note these issues? A way to flag that someone should doublecheck?<br>
A: We only check that you have at least 3 references to be included. Each source of papers might have different quirks (in the dataset), we haven’t tried to address this.</p>
<hr>
</section>
</section>
<section id="i3-updates-and-announcements" class="level2">
<h2 class="anchored" data-anchor-id="i3-updates-and-announcements">5:45 I3 updates and announcements</h2>
<section id="introducing-the-i3-bigquery-data-repository" class="level3">
<h3 class="anchored" data-anchor-id="introducing-the-i3-bigquery-data-repository">Introducing the I3 <a href="https://cloud.google.com/bigquery/public-data/">BigQuery</a> Data Repository</h3>
<p><strong>Dror Shvadron</strong> (University of Toronto), on zoom</p>
<p>This is a work in progress that we’ve been thinking about for a while. Dror, take it away!</p>
<p>Something challenging in our field is we work with large datasets, hard to work with in their original raw form. OpenAlex is 1.5TB. Downloading, grasping its structure, manipulating it, cleaning up discrepancies, merging it with other: all of that takes time, and tacit knowledge to do efficiently.</p>
<p>Not everyone has the ability to do this, so it’s a barrier to making progress and sharing it with people around the world. This project is trying to extend I3 from identifying the datasets to making it easy to work with, using BigQuery. Allowing data processing (in the cloud) at scale, in a reproducible way.</p>
<p><img src="images/06-bigquery-screenshot-1.png" class="img-fluid"></p>
<p><img src="images/07-bigquery-screenshot-2.png" class="img-fluid"></p>
<p>Log into <strong><a href="https://console.cloud.google.com/bigquery">BigQuery</a></strong> from <a href="https://cloud.google.com/">Google Cloud</a>, select <strong>+Add</strong> a project in the Explorer menu, choose <strong>Star a project by name</strong>, and use the project name <code>nber-i3</code>.</p>
<p>Then you’ll be able to browse and query the nber-i3 datasets.</p>
<p>There will also be a <a href="https://groups.google.com/access-error?continue=https://groups.google.com/g/i3-bigquery?pli%3D1">google group</a> for <code>i3-bigquery</code> <em>(not yet publicly visible)</em></p>
<hr>
</section>
<section id="introducing-the-2025-i3-fellows" class="level3">
<h3 class="anchored" data-anchor-id="introducing-the-2025-i3-fellows">Introducing the <a href="https://www.dropbox.com/scl/fi/fzba5f1v48wzzmeluodpo/i3_fellows_2024.pdf?rlkey=oj1u21ngys4momc1bjirntlr7&amp;e=4&amp;st=jx2wzei7&amp;dl=0">2025 I3 Fellows</a>!</h3>
<p><strong>Bhaven Sampat</strong></p>
<p>This is the second year of supporting I3 fellows, after an excellent showing last year and interest in expanding the program. We want to welcome our <strong>7 new fellows</strong>, all working on open datasets: <a href="https://mitsloan.mit.edu/programs/phd/laura-shupp">Laura Shupp</a>, <a href="https://rebekahanne.github.io/">Rebekah Dix</a>, <a href="https://mihaicodreanu.github.io/">Mihai Codreanu</a>, <a href="https://www.tianshulyu.com/">Tianshu Lyu</a>, <a href="https://www.gjunqueira.com/">Guilherme Junqueira</a>, <a href="https://sites.google.com/view/kyoungahnoh/">Kyoungah Noh</a>, and <a href="https://histecon.fas.harvard.edu/Matthew_Lee_Chen.htm">Matthew Lee Chen</a>. Six of them were able to make it to attend the workshop in person! Please say hello and ask them about their work if you see them.</p>
<hr>
<p><strong>6:15 pm</strong> — Dinner reception</p>
<hr>
</section>
</section>
</section>
<section id="saturday-december-7" class="level1">
<h1>Saturday, December 7</h1>
<hr>
<p>9:00 <a href="#building-datasets-with-llms">Building Datasets with LLMs</a> 10:45 <a href="#comparative-nlp-methods">Comparative NLP Methods</a> 11:45 <a href="#global-patent-data">Global Patent Data</a></p>
<hr>
<section id="building-datasets-with-llms" class="level2">
<h2 class="anchored" data-anchor-id="building-datasets-with-llms">9:00 Building Datasets with LLMs</h2>
<section id="llm-based-topic-modeling" class="level3">
<h3 class="anchored" data-anchor-id="llm-based-topic-modeling"><a href="https://conference.nber.org/conf_papers/f211424/f211424.pdf">LLM-based Topic Modeling</a></h3>
<p><img src="images/08-amin-shams.jpg" class="float-end img-fluid" style="max-width: 200px; margin-left: 15px; margin-bottom: 10px;"></p>
<p>Victor Lyonnet (University of Michigan), <strong>Amin Shams</strong>, Shaojun Zhang (The Ohio State University)</p>
<p>We analyzed 6,800 expert consultation calls from 1,700+ companies, and tried to quantify topic-specific sentiment and extract signals predictive of the resulting deal outcome.</p>
<p>We used LLMs to help with these steps. (GPT4 via UMich Azure account). LMs can help because the transcripts are complex, with intricate structure, and topic-level sentiment rather than document-level sentiment; hard for traditional LDAs. There are important caveats here: prompt word choice can easily bias the results.</p>
<p><strong>Topic modeling</strong>: we generate them from a 20% sample, cluster and standardize them, then assign them to all transcripts. We see that topics vary a lot by sector, for instance drinks and beverages focus a lot on the competitive market.</p>
<p><img src="images/09-llm-topic-screenshot.png" class="img-fluid"></p>
<p>We find that many topics have low predictive power, but a few (positive discussion of technology, positive customer signal) are strongly predictive.</p>
<p><strong>Discussion</strong>:</p>
<p>Q: Working with ChatGPT style LLMs I’ve found problems increase with larger texts. If you are working with 3 hour transcripts, how do you deal with this?<br>
A: Depends on how specifically you define a prompt. The more you want to find fine-grained features of individual paragraphs or pages, the more we found this is an issue.</p>
<hr>
</section>
<section id="a-robust-green-patent-database" class="level3">
<h3 class="anchored" data-anchor-id="a-robust-green-patent-database"><a href="https://conference.nber.org/conf_papers/f211394/f211394.pdf">A Robust Green Patent Database</a></h3>
<p><img src="images/10-yuan-sun.jpeg" class="float-end img-fluid" style="max-width: 200px; margin-left: 15px; margin-bottom: 10px;"></p>
<p><strong>Yuan Sun</strong> (Shanghai University of Finance and Economics), Xuan Tian, Yuanchen Yang (Tsinghua University)</p>
<p>An easy way to find green patents is through CPC and EPO labels for sustainable tech. We looked at 580K patents with labels that were associated with green patents. This included CPC classes that are potentially underrepresented in existing catalogs of green patents, expanding on the EPO’s Y02 classification. We used GPT 4o-mini to initially assess patents for whether they were ‘green’. 19% of Y02 patents were assessed at low confidence for being green, while an additional 13% of identified green patents were not in Y02.</p>
<p>Then we compiled a training dataset from these initial assessments, with twice as many negative as positive examples. Finally, we produced detailed descriptions of each patent using GPT 4o-latest.</p>
<p>Issues we faced: we validated each step across different models to find the most efficient one that did what we needed, to keep costs down. Wanted all steps to fit into a mobile device, limiting the need to check a website.</p>
<p>Code is open: see <a href="https://github.com/yuanresearch/Robust-Green-Patents-Paper">yuanresearch/Robust-Green-Patents-Paper</a> You need to use your own API token</p>
<p><strong>Discussion</strong>:</p>
<p>Q: Did you compare this approach across green frameworks?<br>
A: I think that’s the next step. We did only 100 samples here. This db should include all green innovations worldwide; we started with transportation patents. The framework has the potential to expand.</p>
<p>Q: How robust do you expect this classification to be over time?<br>
A: It should get better over time as we refine the model. Q: (<em>But was the question about whether a single model would be persistently good across years, compare to how CPC codes are applied?</em>)</p>
<p>Q: How sensitive was this work on the choice of CPC codes at the start?</p>
<p>Q: Some patents are for a technology that is ambiguously related to environmental sustainability. Is a traffic-efficiency tool that increases the demand for driving good or bad for the environment? Are LLMs good or bad at this nuance?</p>
<hr>
</section>
<section id="distilling-data-from-large-language-models" class="level3">
<h3 class="anchored" data-anchor-id="distilling-data-from-large-language-models"><a href="https://conference.nber.org/conf_papers/f209797/f209797.pdf">Distilling Data from Large Language Models</a></h3>
<p><img src="images/11-maya-durvasula.jpeg" class="float-end img-fluid" style="max-width: 200px; margin-left: 15px; margin-bottom: 10px;"></p>
<p><strong>Maya Durvasula</strong>, Sabri Eyuboglu, David Micha. Ritzwoller (Stanford University)</p>
<p>We want to collect and organize public information about the design and outcomes of pharma clinical trials.</p>
<p>Working with <a href="clinicaltrials.gov">clinicaltrials.gov</a> and PubMed was not always straightforward. About 3000 sponsors haven’t fully published trial results, some proprietary databases take public db’s as an input, and it’s hard to tell whether the changes in them result from updated reporting, or their interpretation and cleaning.</p>
<p><strong>Technical results</strong>: we can get comparable effects to using the most advanced ChatGPT, by using LLMs with the transparency and reproducibility of open source models, at 3% of the cost. Our model was superior than 7 traditional regressions, on measure of both true and false positive rates (but especially the latter).</p>
<p><strong>Asides</strong>: There are 7 tags for clinical trials. Many other studies only use one of the 7. There are many ways to break down this data, and tell stories about it.</p>
<p><strong>Constructing a task-specific LM</strong>:</p>
<ol type="1">
<li><p>A custom model was constructed using model distillation. First hand-labeling 3k labels, wrote a range of prompts, asked GPT-3.5 and -4 to extract noisy labels, and fine-tuned a set of open source models.</p></li>
<li><p>This was used to label a large corpus, far larger than we would have been able to do with the commercial models. And identified a larger set of clinical trials than included in some other sources, suggesting for instance the rate is not decreasing.</p></li>
</ol>
<p><img src="images/12-clinical-trials-screenshot.png" class="img-fluid"></p>
<p><strong>Discussion</strong>:</p>
<p>Q: We know we face publication bias. Denominator of unpublished studies can be large. Do your results speak to that?<br>
A: In constructing the data, we tried to exclude reanalysis by multiple pubs. We don’t think publication bias is itself shifting over this time frame, in a way that would change the trends we observed.</p>
<p>Q: You reflected on implications for research. What are the implications for reporting guidelines, at the reporting stage?<br>
A: A lot of people are thinking about policy here. Two strands: since 2007, all sponsors have to register their studies; since 2017, every sponsor under the FDA auspices has to report results. The FDA has not yet imposed penalties however for non-compliance. The <a href="https://fdaaa.trialstracker.net/">FDAAA Trials Tracker</a> tracks how much money the FDA could have collected had they enforced existing policy and listed fines.</p>
<p>Q: User request: as the first person to fork your github repo, can you add the NCT Number?<br>
A: Yes, if we’ve extracted it we can. (ed: short and sweet!)</p>
<hr>
</section>
</section>
<section id="comparative-nlp-methods" class="level2">
<h2 class="anchored" data-anchor-id="comparative-nlp-methods">10:45 Comparative NLP Methods</h2>
<section id="tracing-the-flow-of-knowledge-from-science-to-technology" class="level3">
<h3 class="anchored" data-anchor-id="tracing-the-flow-of-knowledge-from-science-to-technology"><a href="https://www.ip.mpg.de/en/projects/details/tracing-the-flow-of-knowledge-from-science-to-technology-using-deep-learning.html">Tracing the Flow of Knowledge From Science to Technology</a></h3>
<p><img src="images/13-michael-rose.png" class="float-end img-fluid" style="max-width: 200px; margin-left: 15px; margin-bottom: 10px;"></p>
<p>Dietmar Harhoff, <strong>Michael E. Rose</strong>, Mainak Ghosh, Sebastian Erhardt, Erik Buunk (Max Planck Institute for Innovation and Competition)</p>
<p>This is about LLMs for patents and science, working through some traditional challenges with the benefit of a model.</p>
<p>Early models e.g.&nbsp;BERT didn’t have all terms related to horses. So you would miss some horse-related patents or research. Then came Pat-SPECTER (fine-tuning SPECTER on pats) and Pub-PaECTER (fine-tuning PaECTER on publications), drawing on Semantic Scholar.</p>
<p>This project created a ‘racing ground’ : for a given patent, rank 30 other publications by similarity. 1000 randomly-selected patents, 5 cited pubs, 25 non-cited pubs. SPECTER and Pat-SPECTER performed well.</p>
<p><strong>Applications</strong>: separate patent-paper pairs from patent-paper citations, predict patent-paaper pairs, prior art search for earlier pubs. Making use of <a href="logic-mill.net">logic-mill.net</a> and existing databases of works.</p>
<p>You can see the latest examples at logic-mill, and our <a href="https://huggingface.co/mpi-inno-comp/pat_specter">huggingface repo</a>.</p>
<p><strong>Discussion</strong>:</p>
<p>Q: People used to use GROBID to extract data like this. Can I use LLMs for this now?<br>
A: It can help. We need an English abstract to do it. So if you have a Springer article, which doesn’t share abstracts, it’s harder. The next gen of logic-mill will add Scopus abstracts.</p>
<hr>
</section>
<section id="patent-text-and-long-run-innovation-dynamics" class="level3">
<h3 class="anchored" data-anchor-id="patent-text-and-long-run-innovation-dynamics"><a href="https://www.nber.org/papers/w32934">Patent Text and Long-Run Innovation Dynamics</a></h3>
<p><img src="images/14-vitaly-meursault.jpg" class="float-end img-fluid" style="max-width: 200px; margin-left: 15px; margin-bottom: 10px;"></p>
<p>Ina Ganguli (UMass Amherst, NBER), Jeffrey Lin, <strong>Vitaly Meursault</strong> (Federal Reserve Bank of Philadelphia), Nicholas F. Reynolds (University of Essex)</p>
<p>Here are two graphs over two centuries showing “evolution of similarity”, using the same conceptual measure of similarity but different ways of assigning models to text (GTE vs TF-IDF):</p>
<p><img src="images/15-similarity-graph.png" class="img-fluid"></p>
<p>Instead: try choosing a model using validation tasks. A handful of cases that can serve as a gold standard (we saw examples earlier today). We can start with patent-interference cases, and look for complementary tests.</p>
<p><em>3 validation tasks</em>: - Patent Interference (we are very excited about this) - Human validation (economists should be doing much more of this!) - Classification</p>
<p><strong>Performance</strong>: PaECTER, GTE, and S-BERT do best on different tasks. Pre-BERT models aren’t competitive, but can be more interpretable. The meta-model of ‘using validation tasks’ is a clear winner, but the specific models used has no clear winner. (and may lead to different conclusions)</p>
<p><strong>Discussion</strong>:</p>
<p><img src="images/16-discussion-graph.png" class="img-fluid"></p>
<p>Q: I would expect these graphs to be smoother, given the size of the corpus; what does it mean when there are jumps over the course of a year?</p>
<hr>
</section>
</section>
<section id="global-patent-data" class="level2">
<h2 class="anchored" data-anchor-id="global-patent-data">11:45 Global Patent Data</h2>
<section id="a-new-database-of-indian-patents" class="level3">
<h3 class="anchored" data-anchor-id="a-new-database-of-indian-patents"><a href="https://conference.nber.org/conf_papers/f211414/f211414.slides.pdf">A New Database of Indian Patents</a></h3>
<p><img src="images/17-satyaki-chakravarty.jpg" class="float-end img-fluid" style="max-width: 200px; margin-left: 15px; margin-bottom: 10px;"></p>
<p>Nishant Chadha (Indian School of Business), <strong>Satyaki Chakravarty</strong> (Universita Cattolica del Sacro Cuore), Piyasha Majumdar (India Development Foundation)</p>
<p>We compile a patent-location database, using the database of inventors and a post code for 85% of them.</p>
<p>You get a status page of where each application is in its process. And you can use this to render a county-level map.</p>
<p>Patents filed per <a href="https://en.wikipedia.org/wiki/Postal_Index_Number">region</a>:</p>
<p><img src="images/18-india-patents-region.png" class="img-fluid"></p>
<p>Patents filed per sector:</p>
<p><img src="images/19-india-patents-sector.png" class="img-fluid"></p>
<p><strong>Discussion</strong>:</p>
<p>Problems: authors IPs are sometimes blocked by the government; and they need a bigger machine.</p>
<p>Q: You said you renew patents every year. Is that just bureaucracy?<br>
A: It’s very cheap, you just tell someone to renew it for the next year. Some are not renewed. Renewal is studied more in the US, less in India to date.</p>
<p>Comment: Really unfortunate it’s not on PatStat b/c we don’t have the families as a result. There is priority data, but these samples don’t have a priority date. (only 60% have one) Numbers are messy, they take the original #s from offices that have thousands of variations. But we could clean that to get priority information.</p>
<p>Q: About pharmaceutical research — After TRIPS, will patenting strategies change b/c jurisdiction specific distinctions about what is eligible will change? Chem and bio markets are interesting, India allows some drugs there first.</p>
<p>Q: Is it possible to link clinical trial databases also? From India drug approval<br>
A: I don’t know where to find those. If you have that info, it would be another big task to do.</p>
<hr>
</section>
<section id="creating-the-china-patent-dataset" class="level3">
<h3 class="anchored" data-anchor-id="creating-the-china-patent-dataset"><a href="https://conference.nber.org/conf_papers/f210355/f210355.pdf">Creating the China Patent Dataset</a></h3>
<p><img src="images/20-china-patents-screenshot.png" class="float-end img-fluid" style="max-width: 200px; margin-left: 15px; margin-bottom: 10px;"></p>
<p><strong>Josh Lerner</strong> (Harvard, NBER), Namrata Narain (Harvard), Dimitris Papanikolaou (Northwestern, NBER), Amit Seru (Stanford, NBER)</p>
<p>Presenting a new China patent dataset, tracking the growth in patenting there and its implications for studying innovation.</p>
<p>There are prominent examples of product that could have been foreseen or predicted by watching the growth of patents in certain areas. For instance a hypersonic missile that seemed to have caught US military by surprise, where there had been years of extremely high rates of patenting hypersonic technologies.</p>
<p><img src="images/21-china-hypersonic-graph.png" class="img-fluid"></p>
<p>We hope to go live with this database next year. It includes all patents, whether granted or not, from many sources: leading to 16M patents after cleaning and deduping, with translated assignee names, tags, and non-cite measures of patent quality. It needs TLC before turning it over for full public use. Trying to resolve links to classifications of critical technologies, to identify relative positioning of US and Chinese industries over time.</p>
<p><strong>Discussion</strong>:</p>
<p>Q: Does your Chinese utility patent analysis distinguish between invention patents and utility model patents?<br>
A: Yes. That’s the first filter. What they call “utility patents” are the second-class ones in China, to make things confusing. We in the interest of simplicity have focused on their top-class patents, not on their second-tier patents.</p>
<p>Q: Do you look at propensity to file in the US?<br>
A: In process. We’ve looked at it within critical-tech contexts as well. We want to know whether, as econ theories would predict, that the best patents per our metric are more likely to be cross-patented. With a caveat about secrecy in some cases.</p>
<p>Q: Did you try to validate against <a href="https://www.patsnap.com/">Patsnap</a>?<br>
A: We pursued that early on: whether commercial or semi-commercial databases out there should be used. We had a couple concerns. We wanted to make something that is fully public, open and unencumbered by licensing requirements (such as PatStat and Google Patents). And felt that many of these commercial tools were mainly deriving the information they offered from public data.</p>
<p>Q: Foreign investment into the chinese economy has declined sharply since 2021. Do you see similar contraction in patenting? Do recent shifts in VC investment change what you’re seeing?<br>
A: We’ve been thinking more about constructing the dataset in the past 18mo. But the general thing one hears from the vc community is the environment has moved from a system that mirrored the US, to one where that has dried up considerably and most money comes from the Chinese government, with strings attached. A: Some of the changes in 2018 which led to many funders departing (specific to US funding) we should be able to trace in our data.</p>
<p>Comment: It would be interesting for policymakers if there were a study on the impact of China’s Technology Import and Export Administration Regulations (TIER), which allowed China to capture US technology.</p>
<hr>
</section>
<section id="a-novel-dataset-for-historical-innovation-studies-linking-uspto-patents-and-us-census-data-from-1850-to-1940" class="level3">
<h3 class="anchored" data-anchor-id="a-novel-dataset-for-historical-innovation-studies-linking-uspto-patents-and-us-census-data-from-1850-to-1940"><a href="https://conference.nber.org/conf_papers/f211406/f211406.pdf">A Novel Dataset for Historical Innovation Studies</a>: Linking USPTO Patents and US Census Data from 1850 to 1940</h3>
<p><img src="images/22-zenne-hellinga.jpeg" class="float-end img-fluid" style="max-width: 200px; margin-left: 15px; margin-bottom: 10px;"></p>
<p><strong>Zenne Hellinga</strong> (Utrecht University), Jay Praka. Nagar (Duke University), Stefano Breschi (Bocconi University), Andrea Morrison (University of Pavia), Gianluca Tarasconi (IPQuants)</p>
<p>This dataset is a work in progress, we are happy to release it and your feedback is welcome! Recently more papers have looked at historical patents to see long-term trends, but lack information on inventor backgrounds: families, occupation, birthplace. Some studies have linked inventors to census data, but these vary greatly in matching strategy, coverage [and granularity].</p>
<p>This is an effort to make a publicly available linked dataset with maximal coverage, and compare it to existing datasets. Starting with Google Patents, Census (trying to link across census decades)…</p>
<p><img src="images/23-historical-patents-screenshot.png" class="img-fluid"></p>
<hr>
<p><strong>1:15 pm</strong> — Lunch !</p>
<hr>
<p><em>Original content published on <a href="https://iii.pubpub.org/pub/2024-workshop">PubPub</a> under Creative Commons Attribution 4.0 International License (CC-BY 4.0)</em></p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/www\.i3open\.org");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
Innovation Information Initiative (I³) ©
<script>document.write(new Date().getFullYear())</script>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>